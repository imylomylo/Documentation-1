<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Chapter 03 - CC vins and vouts | Komodo Documentation</title>
    <meta name="description" content="Documentation for developers building on Komodo">
    
    
    <link rel="preload" href="/assets/css/0.styles.7a5b59db.css" as="style"><link rel="preload" href="/assets/js/app.0159a207.js" as="script"><link rel="preload" href="/assets/js/62.f4b3a08a.js" as="script"><link rel="prefetch" href="/assets/js/10.1abc007d.js"><link rel="prefetch" href="/assets/js/100.86e6422e.js"><link rel="prefetch" href="/assets/js/101.527ba523.js"><link rel="prefetch" href="/assets/js/102.0f1f7e5f.js"><link rel="prefetch" href="/assets/js/103.efc53719.js"><link rel="prefetch" href="/assets/js/104.64a934da.js"><link rel="prefetch" href="/assets/js/105.6326590f.js"><link rel="prefetch" href="/assets/js/106.bc52b6ab.js"><link rel="prefetch" href="/assets/js/107.0c3f9e54.js"><link rel="prefetch" href="/assets/js/108.15a26ed3.js"><link rel="prefetch" href="/assets/js/109.85d87adb.js"><link rel="prefetch" href="/assets/js/11.0e4a825b.js"><link rel="prefetch" href="/assets/js/110.a72c6e5e.js"><link rel="prefetch" href="/assets/js/111.dee6199f.js"><link rel="prefetch" href="/assets/js/112.6e80ef98.js"><link rel="prefetch" href="/assets/js/113.b7f8b761.js"><link rel="prefetch" href="/assets/js/114.d4eef182.js"><link rel="prefetch" href="/assets/js/115.f1b71733.js"><link rel="prefetch" href="/assets/js/116.ba45d097.js"><link rel="prefetch" href="/assets/js/117.0ff5d256.js"><link rel="prefetch" href="/assets/js/118.40b794cb.js"><link rel="prefetch" href="/assets/js/119.52af7ac6.js"><link rel="prefetch" href="/assets/js/12.96a4dbb6.js"><link rel="prefetch" href="/assets/js/120.33855840.js"><link rel="prefetch" href="/assets/js/121.a75d99ce.js"><link rel="prefetch" href="/assets/js/122.670cb1bb.js"><link rel="prefetch" href="/assets/js/123.c3cce98b.js"><link rel="prefetch" href="/assets/js/124.65e479ca.js"><link rel="prefetch" href="/assets/js/125.5db663d6.js"><link rel="prefetch" href="/assets/js/126.8f01c9bd.js"><link rel="prefetch" href="/assets/js/127.9977f2ca.js"><link rel="prefetch" href="/assets/js/128.4e199eba.js"><link rel="prefetch" href="/assets/js/129.b0baea52.js"><link rel="prefetch" href="/assets/js/13.1ee078f6.js"><link rel="prefetch" href="/assets/js/130.a2007d19.js"><link rel="prefetch" href="/assets/js/131.3c88abbf.js"><link rel="prefetch" href="/assets/js/132.427dfade.js"><link rel="prefetch" href="/assets/js/133.b8e8af5f.js"><link rel="prefetch" href="/assets/js/134.34aa6ee7.js"><link rel="prefetch" href="/assets/js/135.793b087c.js"><link rel="prefetch" href="/assets/js/136.c4c9b71d.js"><link rel="prefetch" href="/assets/js/137.034d7d5b.js"><link rel="prefetch" href="/assets/js/138.d95818cc.js"><link rel="prefetch" href="/assets/js/139.c7c36a18.js"><link rel="prefetch" href="/assets/js/14.7ffc35cb.js"><link rel="prefetch" href="/assets/js/140.abb83c2d.js"><link rel="prefetch" href="/assets/js/141.cab0123b.js"><link rel="prefetch" href="/assets/js/142.729e07c7.js"><link rel="prefetch" href="/assets/js/143.a02017b3.js"><link rel="prefetch" href="/assets/js/144.0b246ba3.js"><link rel="prefetch" href="/assets/js/145.209847ce.js"><link rel="prefetch" href="/assets/js/146.67ec0c58.js"><link rel="prefetch" href="/assets/js/147.8af42564.js"><link rel="prefetch" href="/assets/js/148.38d38b0c.js"><link rel="prefetch" href="/assets/js/149.f481cb81.js"><link rel="prefetch" href="/assets/js/15.d827f422.js"><link rel="prefetch" href="/assets/js/150.d380bb10.js"><link rel="prefetch" href="/assets/js/151.1bf1b19f.js"><link rel="prefetch" href="/assets/js/152.13fe9d2f.js"><link rel="prefetch" href="/assets/js/153.0a288c5c.js"><link rel="prefetch" href="/assets/js/154.03a81241.js"><link rel="prefetch" href="/assets/js/16.310900d7.js"><link rel="prefetch" href="/assets/js/17.3e8bb7d0.js"><link rel="prefetch" href="/assets/js/18.44806e77.js"><link rel="prefetch" href="/assets/js/19.ffd7802a.js"><link rel="prefetch" href="/assets/js/2.20cea359.js"><link rel="prefetch" href="/assets/js/20.074613df.js"><link rel="prefetch" href="/assets/js/21.1c5a4f08.js"><link rel="prefetch" href="/assets/js/22.6abc8eff.js"><link rel="prefetch" href="/assets/js/23.0c98f1aa.js"><link rel="prefetch" href="/assets/js/24.7082c20f.js"><link rel="prefetch" href="/assets/js/25.a985b64e.js"><link rel="prefetch" href="/assets/js/26.1ef84c4c.js"><link rel="prefetch" href="/assets/js/27.b7cee9e2.js"><link rel="prefetch" href="/assets/js/28.27a2d732.js"><link rel="prefetch" href="/assets/js/29.2c071609.js"><link rel="prefetch" href="/assets/js/3.b450b0f6.js"><link rel="prefetch" href="/assets/js/30.4613b264.js"><link rel="prefetch" href="/assets/js/31.9aa12eb6.js"><link rel="prefetch" href="/assets/js/32.de1de551.js"><link rel="prefetch" href="/assets/js/33.a9252d0a.js"><link rel="prefetch" href="/assets/js/34.d31bf6d5.js"><link rel="prefetch" href="/assets/js/35.820adffc.js"><link rel="prefetch" href="/assets/js/36.717e595f.js"><link rel="prefetch" href="/assets/js/37.554a3c3c.js"><link rel="prefetch" href="/assets/js/38.1c866551.js"><link rel="prefetch" href="/assets/js/39.0b878e08.js"><link rel="prefetch" href="/assets/js/4.903b21ab.js"><link rel="prefetch" href="/assets/js/40.64d896d4.js"><link rel="prefetch" href="/assets/js/41.22a39e2c.js"><link rel="prefetch" href="/assets/js/42.60f4f4bc.js"><link rel="prefetch" href="/assets/js/43.fbdc3e8d.js"><link rel="prefetch" href="/assets/js/44.e7438b06.js"><link rel="prefetch" href="/assets/js/45.84e26d61.js"><link rel="prefetch" href="/assets/js/46.1cf3af13.js"><link rel="prefetch" href="/assets/js/47.ee60528d.js"><link rel="prefetch" href="/assets/js/48.bfb28263.js"><link rel="prefetch" href="/assets/js/49.e32a852f.js"><link rel="prefetch" href="/assets/js/5.d357256b.js"><link rel="prefetch" href="/assets/js/50.7f4c24fd.js"><link rel="prefetch" href="/assets/js/51.78c9cecb.js"><link rel="prefetch" href="/assets/js/52.56b31d0d.js"><link rel="prefetch" href="/assets/js/53.e1fa9af4.js"><link rel="prefetch" href="/assets/js/54.f6e6bdf9.js"><link rel="prefetch" href="/assets/js/55.0b1f6a18.js"><link rel="prefetch" href="/assets/js/56.2c67dd80.js"><link rel="prefetch" href="/assets/js/57.562ab706.js"><link rel="prefetch" href="/assets/js/58.564edfae.js"><link rel="prefetch" href="/assets/js/59.edc1056c.js"><link rel="prefetch" href="/assets/js/6.77a2ef62.js"><link rel="prefetch" href="/assets/js/60.d7b6186e.js"><link rel="prefetch" href="/assets/js/61.aec80a17.js"><link rel="prefetch" href="/assets/js/63.b811cfac.js"><link rel="prefetch" href="/assets/js/64.19a9e382.js"><link rel="prefetch" href="/assets/js/65.b8b229f9.js"><link rel="prefetch" href="/assets/js/66.2278a41b.js"><link rel="prefetch" href="/assets/js/67.01639b56.js"><link rel="prefetch" href="/assets/js/68.80ad1cad.js"><link rel="prefetch" href="/assets/js/69.93619b57.js"><link rel="prefetch" href="/assets/js/7.5c748eda.js"><link rel="prefetch" href="/assets/js/70.49c1e23f.js"><link rel="prefetch" href="/assets/js/71.4368ed85.js"><link rel="prefetch" href="/assets/js/72.4b738a0d.js"><link rel="prefetch" href="/assets/js/73.c29d2082.js"><link rel="prefetch" href="/assets/js/74.7614b378.js"><link rel="prefetch" href="/assets/js/75.590e2709.js"><link rel="prefetch" href="/assets/js/76.7bb0b796.js"><link rel="prefetch" href="/assets/js/77.b158e400.js"><link rel="prefetch" href="/assets/js/78.d546ff8f.js"><link rel="prefetch" href="/assets/js/79.902d17fa.js"><link rel="prefetch" href="/assets/js/8.52b8b063.js"><link rel="prefetch" href="/assets/js/80.c1388433.js"><link rel="prefetch" href="/assets/js/81.e74bc417.js"><link rel="prefetch" href="/assets/js/82.5fa6f37f.js"><link rel="prefetch" href="/assets/js/83.d914eac5.js"><link rel="prefetch" href="/assets/js/84.0d0bfb7f.js"><link rel="prefetch" href="/assets/js/85.344976f8.js"><link rel="prefetch" href="/assets/js/86.8ce533c6.js"><link rel="prefetch" href="/assets/js/87.49b34263.js"><link rel="prefetch" href="/assets/js/88.465d38ba.js"><link rel="prefetch" href="/assets/js/89.de697707.js"><link rel="prefetch" href="/assets/js/9.bfbcf8fb.js"><link rel="prefetch" href="/assets/js/90.1defd386.js"><link rel="prefetch" href="/assets/js/91.49948d4d.js"><link rel="prefetch" href="/assets/js/92.a93dd69a.js"><link rel="prefetch" href="/assets/js/93.52468d4a.js"><link rel="prefetch" href="/assets/js/94.b2afb430.js"><link rel="prefetch" href="/assets/js/95.ea9c86f1.js"><link rel="prefetch" href="/assets/js/96.925b4e5d.js"><link rel="prefetch" href="/assets/js/97.87d0668e.js"><link rel="prefetch" href="/assets/js/98.3b0ce612.js"><link rel="prefetch" href="/assets/js/99.67c3a2f7.js">
    <link rel="stylesheet" href="/assets/css/0.styles.7a5b59db.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Komodo Documentation</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/basic-docs/start-here/introduction.html" class="nav-link">Start Here</a></div><div class="nav-item"><a href="/whitepaper/introduction.html" class="nav-link">Whitepaper</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Guides</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/komodo/installation.html" class="nav-link">Komodo</a></li><li class="dropdown-item"><!----> <a href="/assetchains/beginner-vps-linux.html" class="nav-link">Asset Chains</a></li><li class="dropdown-item"><!----> <a href="/notary/setup-Komodo-Notary-Node.html" class="nav-link">Notary Nodes</a></li><li class="dropdown-item"><!----> <a href="/mmV1/introduction.html" class="nav-link">Marketmaker V1</a></li></ul></div></div><div class="nav-item"><a href="/cc-jl/introduction.html" class="nav-link">CC Book</a></div><div class="nav-item"><a href="/gui/agama/introduction.html" class="nav-link">Agama</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Resources</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/resources/list-all-KomodoPlatform-repos-links.html" class="nav-link">Komodo Platform</a></li><li class="dropdown-item"><!----> <a href="/resources/third-party-repos-resources.html" class="nav-link">Third Party</a></li></ul></div></div><div class="nav-item"><a href="https://komodoplatform.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  KomodoPlatform.com
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/basic-docs/start-here/introduction.html" class="nav-link">Start Here</a></div><div class="nav-item"><a href="/whitepaper/introduction.html" class="nav-link">Whitepaper</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Guides</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/komodo/installation.html" class="nav-link">Komodo</a></li><li class="dropdown-item"><!----> <a href="/assetchains/beginner-vps-linux.html" class="nav-link">Asset Chains</a></li><li class="dropdown-item"><!----> <a href="/notary/setup-Komodo-Notary-Node.html" class="nav-link">Notary Nodes</a></li><li class="dropdown-item"><!----> <a href="/mmV1/introduction.html" class="nav-link">Marketmaker V1</a></li></ul></div></div><div class="nav-item"><a href="/cc-jl/introduction.html" class="nav-link">CC Book</a></div><div class="nav-item"><a href="/gui/agama/introduction.html" class="nav-link">Agama</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Resources</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/resources/list-all-KomodoPlatform-repos-links.html" class="nav-link">Komodo Platform</a></li><li class="dropdown-item"><!----> <a href="/resources/third-party-repos-resources.html" class="nav-link">Third Party</a></li></ul></div></div><div class="nav-item"><a href="https://komodoplatform.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  KomodoPlatform.com
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/cc-jl/introduction.html" class="sidebar-link">How to write UTXO based CC modules for KMD based chains - by jl777</a></li><li><a href="/cc-jl/chapter00.html" class="sidebar-link">Chapter 00 - Bitcoin Protocol Basics</a></li><li><a href="/cc-jl/chapter01.html" class="sidebar-link">Chapter 01 - OP_CHECKCRYPTOCONDITION</a></li><li><a href="/cc-jl/chapter02.html" class="sidebar-link">Chapter 02 - CC Contract Basics</a></li><li><a href="/cc-jl/chapter03.html" class="active sidebar-link">Chapter 03 - CC vins and vouts</a></li><li><a href="/cc-jl/chapter04.html" class="sidebar-link">Chapter 04 - CC RPC Extensions</a></li><li><a href="/cc-jl/chapter05.html" class="sidebar-link">Chapter 05 - CC Validation</a></li><li><a href="/cc-jl/chapter06.html" class="sidebar-link">Chapter 06 - Faucet Example</a></li><li><a href="/cc-jl/chapter07.html" class="sidebar-link">Chapter 07 - Rewards Example</a></li><li><a href="/cc-jl/chapter08.html" class="sidebar-link">Chapter 08 - Assets Example</a></li><li><a href="/cc-jl/chapter09.html" class="sidebar-link">Chapter 09 - Dice Example</a></li><li><a href="/cc-jl/chapter10.html" class="sidebar-link">Chapter 10 - Channels Example</a></li><li><a href="/cc-jl/chapter11.html" class="sidebar-link">Chapter 11 - Oracles Example</a></li><li><a href="/cc-jl/chapter12.html" class="sidebar-link">Chapter 12 - Limitless Possibilities</a></li><li><a href="/cc-jl/chapter13.html" class="sidebar-link">Chapter 13 - Different Languages</a></li><li><a href="/cc-jl/chapter14.html" class="sidebar-link">Chapter 14 - Runtime Bindings</a></li><li><a href="/cc-jl/chapter15.html" class="sidebar-link">Chapter 15 - RPC based dAPPS</a></li><li><a href="/cc-jl/faq.html" class="sidebar-link">Frequently asked Questions</a></li></ul> </div> <div class="page"> <div class="content"><h1 id="chapter-03-cc-vins-and-vouts"><a href="#chapter-03-cc-vins-and-vouts" aria-hidden="true" class="header-anchor">#</a> Chapter 03 - CC vins and vouts</h1> <p>You might want to review the bitcoin basics and other materials to refresh about how bitcoin outputs become inputs. It is a bit complicated, but ultimately it is about one specific amount of coins that are spent, once spent it is combined with the other coins that are also spent in that transaction and then various outputs are created.</p> <div class="language-bash extra-class"><pre class="language-bash"><code>vin0 + vin1 + vin2 -<span class="token operator">&gt;</span> vout0 + vout1
</code></pre></div><p>That is a 3 input, 2 output transaction. The value from the three inputs are combined and then split into vout0 and vout1, each of the vouts gets a spend script that must be satisfied to be able to be spent. Which means for all three of out vins, all the requirements (as specified in the output that created them) are satisfied.</p> <p>Yes, I know this is a bit too complicated without a nice chart, so we will hope that a nice chart is added here:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>Placeholder text <span class="token keyword">:</span> <span class="token punctuation">[</span>nice chart goes here<span class="token punctuation">]</span>
</code></pre></div><p>Out of all the aspects of the CC contracts, the flexibility that different vins and vouts created was the biggest surprise. When I started writing the first of these a month ago, I had no idea the power inherent in the smart utxo contracts. I was just happy to have a way to lock funds and release them upon some specific conditions.</p> <p>After the assets/tokens CC contract, I realized that it was just a tip of the iceberg. I knew it was Turing complete, but after all these years of restricted bitcoin script, to have the full power of any arbitrary algorithm, it was eye opening. Years of writing blockchain code and having really bad consequences with every bug naturally makes you gun shy about doing aggressive things at the consensus level. And that is the way it should be, if not very careful, some really bad things can and do happen. The foundation of building on top of the existing (well tested and reliable) utxo system is what makes the CC contracts less likely for the monster bugs. That being said, lack of validation can easily allow an improperly coded CC contract to have its funds drained.</p> <p>The CC contract breaks out of the standard limitations of a bitcoin transaction. Already, what I wrote explains the reason, but it was not obvious even to me at first, so likely you might have missed it too. If you are wondering what on earth I am talking about, THAT is what I am talking about!</p> <p>To recap, we have now a new standard bitcoin output type called a CC output. Further, there can be up to 256 different types of CC outputs active on any given blockchain. We also know that to spend any output, you need to satisfy its spending script, which in our case is the signature and whatever constraints the CC validation imposes. We also have the convention of a globally shared keypair, which gives us a general CC address that can have funds sent to it, along with a user pubkey specific CC address.</p> <p>Let us go back to the 3+2 transaction example:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>vin0 + vin1 + vin2 -<span class="token operator">&gt;</span> vout0 + vout1
</code></pre></div><p>Given the prior paragraph, try to imagine the possibilities the simple 3+2 transaction can be. Each vin could be a normal vin, from the global contract address, the user's CC address and the vouts can also have this range. Theoretically, there can be 257 * 257 * 257 * 257 * 257 forms of a 3+2 transaction!</p> <p>In reality, we really dont want that much degrees of freedom as it will ensure a large degree of bugs! So we need to reduce things to a more manageable level where there are at most 3 types for each, and preferably just 1 type. That will make the job of validating it much simpler and simple is better as long as we dont sacrifice the power. We dont.</p> <p>Ultimately the CC contract is all about how it constrains its inputs, but before it can constrain them, they need to be created as outputs. More about this in the CC validation chapter.</p></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/cc-jl/chapter02.html" class="prev">
          Chapter 02 - CC Contract Basics
        </a></span> <span class="next"><a href="/cc-jl/chapter04.html">
          Chapter 04 - CC RPC Extensions
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/assets/js/app.0159a207.js" defer></script><script src="/assets/js/62.f4b3a08a.js" defer></script>
  </body>
</html>
